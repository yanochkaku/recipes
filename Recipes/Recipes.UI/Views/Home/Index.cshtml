@using System.Globalization
@using Recipes.Core;


@{
    ViewData["Title"] = "Home Page";
}
 <link rel="icon" href="img/core-img/favicon.ico">
  <link rel="stylesheet" href="style.css">

<body>

<!-- ##### Hero Area Start ##### -->
    <section class="hero-area">
        <div class="hero-slides owl-carousel">
            <!-- Single Hero Slide -->
            <div class="single-hero-slide bg-img" style="background-image: url(img/bg-img/bg1.jpg);">
                <div class="container h-100">
                    <div class="row h-100 align-items-center">
                        <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                            <div class="hero-slides-content" data-animation="fadeInUp" data-delay="100ms">
                                <h2 data-animation="fadeInUp" data-delay="300ms">Перші страви</h2>
                                <p data-animation="fadeInUp" data-delay="700ms">Смачні та корисні перші страви у нашому каталозі! Читайте, готуйте, насолоджуйтесь!</p>
                                <a href="/infoDish" class="btn delicious-btn" data-animation="fadeInUp" data-delay="1000ms">Детальніше</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
             <!-- Single Hero Slide -->
            <div class="single-hero-slide bg-img" style="background-image: url(img/bg-img/bg6.jpg);">
                <div class="container h-100">
                    <div class="row h-100 align-items-center">
                        <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                            <div class="hero-slides-content" data-animation="fadeInUp" data-delay="100ms">
                                <h2 data-animation="fadeInUp" data-delay="300ms">Другі страви</h2>
                                <p data-animation="fadeInUp" data-delay="700ms">Рецепти других страв у нашому каталозі. Другі страви з різних кухонь світу.</p>
                                <a href="/infoDish" class="btn delicious-btn" data-animation="fadeInUp" data-delay="1000ms">Детальніше</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Single Hero Slide -->
            <div class="single-hero-slide bg-img" style="background-image: url(img/bg-img/bg7.jpg);">
                <div class="container h-100">
                    <div class="row h-100 align-items-center">
                        <div class="col-12 col-md-9 col-lg-7 col-xl-6">
                            <div class="hero-slides-content" data-animation="fadeInUp" data-delay="100ms">
                                <h2 data-animation="fadeInUp" data-delay="300ms">Десерти</h2>
                                <p data-animation="fadeInUp" data-delay="700ms">Смачні десерти та торти, які стануть окрасою столу та насолодою на завершення обіду.</p>
                                <a href="/infoDish" class="btn delicious-btn" data-animation="fadeInUp" data-delay="1000ms">Детальніше</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
     <!-- ##### Hero Area End ##### -->
     
    <section class="top-catagory-area section-padding-80-0">
        <div class="container">
            <div class="row">
                <div class="section-heading">
                        <h2>Найпопулярніші рецепти</h2>
                    </div>
                <!-- Top Catagory Area -->
                <div class="col-1 col-sm-6 col-lg-4">
                   <div class="single-best-receipe-area mb-30">
                        <img src="img/bg-img/bg2.jpg" alt="">
                        <!-- Content -->
                        <div class="top-cta-content">
                            <h3>Полуничний торт</h3>
                            <h6>Просто &amp; Смачно</h6>
                            <a href="receipe-post.html" class="btn delicious-btn">Дивитися рецепт детальніше</a>
                        </div>
                    </div>
                </div>
                <!-- Top Catagory Area -->
                <div class="col-1 col-sm-6 col-lg-4">
                   <div class="single-best-receipe-area mb-30">
                        <img src="img/bg-img/bg3.jpg" alt="">
                        <!-- Content -->
                        <div class="top-cta-content">
                            <h3>Китайська паста</h3>
                            <h6>Просто &amp; Смачно</h6>
                            <a href="receipe-post.html" class="btn delicious-btn">Дивитися рецепт детальніше</a>
                        </div>
                    </div>
                </div>
                 <!-- Top Catagory Area -->
               <div class="col-1 col-sm-6 col-lg-4">
                   <div class="single-best-receipe-area mb-30">
                        <img src="img/bg-img/bg5.jpg" alt="">
                        <!-- Content -->
                        <div class="top-cta-content">
                            <h3>Овочевий салат</h3>
                            <h6>Просто &amp; Смачно</h6>
                            <a href="receipe-post.html" class="btn delicious-btn">Дивитися рецепт детальніше</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ##### Follow Us Instagram Area Start ##### -->
    <div class="follow-us-instagram">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h5>Instragram</h5>
                </div>
            </div>
        </div>
        <!-- Instagram Feeds -->
        <div class="insta-feeds d-flex flex-wrap">
            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="img/bg-img/insta1.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="https://www.instagram.com/thefeedfeed"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="img/bg-img/insta2.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="https://www.instagram.com/thefeedfeed"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="img/bg-img/insta3.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="https://www.instagram.com/thefeedfeed"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="img/bg-img/insta4.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="https://www.instagram.com/thefeedfeed"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="img/bg-img/insta5.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="https://www.instagram.com/thefeedfeed"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="img/bg-img/insta6.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="https://www.instagram.com/thefeedfeed"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="img/bg-img/insta7.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="https://www.instagram.com/thefeedfeed"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- ##### Follow Us Instagram Area End ##### -->
<!-- ##### Footer Area Start ##### -->
    <footer class="footer-area">
        <div class="container h-100">
            <div class="row h-100">
                <div class="col-12 h-100 d-flex flex-wrap align-items-center justify-content-between">
                    <!-- Footer Social Info -->
                    <div class="footer-social-info text-right">
                        <a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a>
                        <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                        <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                        <a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a>
                        <a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a>
                        <a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                    </div>
                    <!-- Footer Logo -->
                    <div class="footer-logo">
                        <a href="index.html"><img src="img/core-img/logo.png" alt=""></a>
                    </div>
                    <!-- Copywrite -->
                    <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
 &copy;<script>document.write(new Date().getFullYear());</script> This site is made with <i class="fa fa-heart-o" aria-hidden="true"></i> 
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
                </div>
            </div>
        </div>
    </footer>
    <!-- ##### Footer Area Start ##### -->

    <!-- ##### All Javascript Files ##### -->
    <!-- jQuery-2.2.4 js -->
    <script src="js/jquery/jquery-2.2.4.min.js"></script>
    <!-- Popper js -->
    <script src="js/bootstrap/popper.min.js"></script>
    <!-- Bootstrap js -->
    <script src="js/bootstrap/bootstrap.min.js"></script>
    <!-- All Plugins js -->
    <script src="js/plugins/plugins.js"></script>
    <!-- Active js -->
    <script src="js/active.js"></script>
</body>


@section Scripts {

    <link rel="stylesheet" href="~/css/card.css" type="text/css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.min.js"></script>

    <script>

        function LoadDate() {

            $.ajax({
                url: "/home/date",
                type: "get",
                success: function (result) {
                    $("#date").html(result);
                }
            });

        }


        var colors = ["#00FFFF", "#32CD32", "#BA55D3", "#4B0082", "#A52A2A", "#4169E1", "#B22222"]

        function updateMiniChart(eq_id, data) {

            var color = colors[Math.floor(Math.random() * (colors.length - 1))];

            let ctx = document.getElementById('chart' + eq_id).getContext('2d');

            var gradient = ctx.createLinearGradient(0, 0, 120, 100);
            gradient.addColorStop(0, 'rgba(229, 239, 255, 1)');
            gradient.addColorStop(1, '#FFFFFF');

            let chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.key,
                    datasets: [
                        {
                            data: data.value,
                            backgroundColor: '#EEE'
                        }
                    ]
                },
                options: {
                    responsive: false,
                    legend: {
                        display: false
                    },
                    elements: {
                        line: {
                            borderColor: color,
                            borderWidth: 3
                        },
                        point: {
                            radius: 0
                        }
                    },
                    tooltips: {
                        enabled: false
                    },
                    scales: {
                        yAxes: [
                            {
                                display: false
                            }
                        ],
                        xAxes: [
                            {
                                display: false
                            }
                        ]
                    }
                }
            });
        }

        $(function () {

            LoadDate();

            $.ajax({
                url: "/home/losses",
                type: "get",
                success: function (result) {

                    var contentRow = "<div class='row'>";

                    for (let i = 0; i < result.length; i++) {

                        var content = "<div class='col-md-4 col-lg-2 col-6 col-sm-6 mb-5 item-card'><div class='card h-100 shadow'>";

                        content += "<div class='card-body'><canvas id='chart" + result[i].type.id + "'></canvas><div class='num-block'>"
                            + "<img src='eq/icon/" + result[i].type.id + "' alt='' />"
                            + "<h5>" + result[i].count + "</h5>"
                            + "<h6>+" + result[i].countPlus + "</h6></div>"
                            + "<a href='/eq/details/" + result[i].id
                            + "' class='title'>" + result[i].type.title + " <i class='bi bi-arrow-right'></i></a></div>";

                        content += "</div></div>";

                        contentRow += content;
                    }

                    contentRow += "</div>";

                    $(".item-content").html(contentRow);

                    for (let i = 0; i < result.length; i++) {
                        $.ajax({
                            url: "/home/geteqdata/" + result[i].type.id,
                            type: "get",
                            success: function (resultData) {
                                console.log(resultData);
                                updateMiniChart(result[i].type.id, resultData);

                            }
                        });

                    }
                }
            });

        })
    </script>

}